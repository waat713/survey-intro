<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Khảo sát Vắc Xin HPV</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <style>
        body { padding: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; }
        .container { max-width: 800px; margin-top: 50px; background: white; padding: 40px; border-radius: 12px; shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .timer { font-weight: bold; color: #dc3545; font-size: 1.5rem; }
        h1 { color: #2c3e50; margin-bottom: 25px; }
        .btn-start { background-color: #007bff; border: none; padding: 12px 30px; font-size: 1.1rem; }
        .btn-start:disabled { background-color: #6c757d; }
    </style>
</head>
<body>

    <div class="container shadow-sm">
        <h1>Chào Mừng Anh/Chị Đến Với Khảo Sát!</h1>
        <p>Khảo sát này nhằm tìm hiểu các yếu tố ảnh hưởng đến việc tiêm vắc xin HPV cho con của phụ huynh. Anh/Chị sẽ được yêu cầu lựa chọn giữa hai phương án "vắc xin A", "vắc xin B" hoặc không chọn phương án nào trong 9 trường hợp khác nhau. Vui lòng đọc kỹ hướng dẫn trước khi bắt đầu khảo sát. Xin chân thành cảm ơn!</p>
        

        <p>Thời gian chờ: <span class="timer" id="timer">5</span> giây</p>
        <button id="startSurveyBtn" class="btn btn-primary btn-start" disabled>Bắt đầu khảo sát</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <script>
        $(document).ready(function() {
            let timeLeft = 5; // Đổi thành 5 giây theo yêu cầu
            const timerDisplay = $("#timer");
            const startBtn = $("#startSurveyBtn");

            // Đếm ngược
            const countdown = setInterval(function() {
                timeLeft--;
                timerDisplay.text(timeLeft);
                if (timeLeft <= 0) {
                    clearInterval(countdown);
                    startBtn.prop("disabled", false);
                    timerDisplay.text("0");
                }
            }, 1000);

            // Danh sách 3 link Google Form
            const surveyLinks = [
                "https://forms.gle/t7uWdQVFaFoho6Bk9", 
                "https://forms.gle/VEfNxT9JQgpWpSFi6",
                "https://forms.gle/aHjq8VAoUDmdBeCc6"
            ];

            // Logic điều phối lượt điền form (Load Balancing)
            startBtn.click(function() {
                let counts = JSON.parse(localStorage.getItem("surveyCounts") || '{"0":0, "1":0, "2":0}');
                
                // Tìm form có ít lượt click nhất
                let min = Math.min(counts["0"], counts["1"], counts["2"]);
                let choices = Object.keys(counts).filter(key => counts[key] === min);
                let selectedIndex = choices[Math.floor(Math.random() * choices.length)];

                // Cập nhật lượt click vào bộ nhớ trình duyệt
                counts[selectedIndex]++;
                localStorage.setItem("surveyCounts", JSON.stringify(counts));

                // Chuyển hướng
                window.location.href = surveyLinks[selectedIndex];
            });
        });
    </script>
</body>
</html>